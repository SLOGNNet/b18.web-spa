<div class="autocomplete-filter">
  <div
    sticky
    class="autocomplete-title">
    <bd-input
      (valueChange)="onAutocompleteChange($event)"
      [value]="query"
      placeholder="Enter data">
        <i
          bd-suffix
          (click)="clearField($event)"
          class="icon-minus"
          aria-hidden="true">
        </i>
    </bd-input>
    <button
      [class.hide]="selectedItems.length <= 1"
      (click)="clearSelectedItems($event)">
      Clear selected items
    </button>
  </div>

  <div *ngIf="isSearchMode">
    <filter-item
      *ngFor="let item of loadedItems; let i = index;"
      [itemTemplate]="itemTemplate"
      [selected]="isSelected(item)"
      (selectedChange)="onSelect($event)"
      (itemClick)="onClick($event)"
      [item]="item">
    </filter-item>
  </div>
  <div *ngIf="!isSearchMode">
    <filter-item
      *ngFor="let item of selectedItemsCache; let i = index;"
      [selected]="isSelected(item)"
      [itemTemplate]="itemTemplate"
      (selectedChange)="onSelect($event)"
      (itemClick)="onClick($event)"
      [item]="item">
    </filter-item>
    <div class="autocomplete-section-header" *ngIf="loadedItemsCache.length && selectedItemsCache.length">
      ALL VALUES
    </div>
    <div *ngIf="loadedItemsCache.length">
      <filter-item
        *ngFor="let item of loadedItemsCache; let i = index;"
        [itemTemplate]="itemTemplate"
        [selected]="isSelected(item)"
        (selectedChange)="onSelect($event)"
        (itemClick)="onClick($event)"
        [item]="item">
      </filter-item>
    </div>
  </div>
  <bd-spinner *ngIf="isLoading"></bd-spinner>
</div>
