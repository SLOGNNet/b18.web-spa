<div class="autocomplete-filter">
  <bd-input
    (valueChange)="onAutocompleteChange($event)"
    [value]="query"
    placeholder="Enter data">
    <i
      bd-suffix
      (click)="clearField($event)"
      class="icon-minus"
      aria-hidden="true">
    </i>
  </bd-input>
  <div
    class="autocomplete-section-header">
    <button
      (click)="clearSelectedItems($event)"
      [disabled]="selectedItems.length < 1">
      <span *ngIf="selectedItems.length == 0">ALL VALUES</span>
      <span *ngIf="selectedItems.length > 0">Clear selected items</span>     
    </button>
  </div>
  <div *ngIf="isSearchMode">
    <filter-item
      *ngFor="let item of loadedItems; let i = index;"
      [itemTemplate]="itemTemplate"
      [selected]="isSelected(item)"
      (selectedChange)="onSelect($event)"
      [item]="item">
    </filter-item>
  </div>
  <div *ngIf="!isSearchMode">
    <filter-item
      *ngFor="let item of selectedItemsCache; let i = index;"
      [selected]="isSelected(item)"
      [itemTemplate]="itemTemplate"
      (selectedChange)="onSelect($event)"
      [item]="item">
    </filter-item>
    <div class="autocomplete-section-header" *ngIf="loadedItemsCache.length && selectedItemsCache.length">
      ALL VALUES
    </div>
    <div *ngIf="loadedItemsCache.length">
      <filter-item
        *ngFor="let item of loadedItemsCache; let i = index;"
        [itemTemplate]="itemTemplate"
        [selected]="isSelected(item)"
        (selectedChange)="onSelect($event)"
        [item]="item">
      </filter-item>
    </div>
  </div>
  <bd-spinner *ngIf="isLoading"></bd-spinner>
</div>
