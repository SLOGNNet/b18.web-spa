<div class="autocomplete-filter">
  <bd-input
    #bdInput
    (valueChange)="onAutocompleteChange($event)"
    [value]="query"
    placeholder="Enter data">
    <i
      bd-suffix
      (click)="clearField($event)"
      class="icon-minus"
      aria-hidden="true">
    </i>
  </bd-input>
  <div
    class="autocomplete-section-header">
    <span *ngIf="!selectedItems.length && !selectedItemsCache.length">ALL VALUES</span>
    <button
      *ngIf="selectedItemsCache.length || selectedItems.length"
      (click)="clearSelectedItems($event)"
      [disabled]="isClearButtonDisabled">
      Clear selected items
    </button>
  </div>
  <div *ngIf="isSearchMode">
    <filter-item
      *ngFor="let item of loadedItems; let i = index;"
      [itemTemplate]="itemTemplate"
      [checked]="isSelected(item)"
      (checkedChange)="onSelectedChange($event)"
      (click)="onItemClick(item)"
      [item]="item">
    </filter-item>
  </div>
  <div *ngIf="!isSearchMode">
    <filter-item
      *ngFor="let item of selectedItemsCache; let i = index;"
      [checked]="isSelected(item)"
      [itemTemplate]="itemTemplate"
      (checkedChange)="onSelectedChange($event)"
      (click)="onItemClick(item)"
      [item]="item">
    </filter-item>
    <div class="autocomplete-section-header" *ngIf="loadedItemsCache.length && selectedItemsCache.length">
      ALL VALUES
    </div>
    <div *ngIf="loadedItemsCache.length">
      <filter-item
        *ngFor="let item of loadedItemsCache; let i = index;"
        [itemTemplate]="itemTemplate"
        [checked]="isSelected(item)"
        (checkedChange)="onSelectedChange($event)"
        (click)="onItemClick(item)"
        [item]="item">
      </filter-item>
    </div>
  </div>
  <bd-spinner *ngIf="isLoading"></bd-spinner>
</div>
