<div class="autocomplete-filter">
  <bd-input
    #bdInput
    (valueChange)="onAutocompleteChange($event)"
    [value]="query"
    placeholder="Enter data">
    <i
      bd-suffix
      (click)="clearField($event)"
      class="icon-minus"
      aria-hidden="true">
    </i>
  </bd-input>
  <div *ngIf="isSearchMode">
    <filter-item
      *ngFor="let item of loadedItems; let i = index;"
      [itemTemplate]="itemTemplate"
      [selected]="isSelected(item)"
      (selectedChange)="onSelect($event)"
      [item]="item">
    </filter-item>
  </div>
  <div *ngIf="!isSearchMode">
    <div
      *ngIf="selectedItems.length > 1"
      class="autocomplete-section-header">
      <button
        (click)="clearSelectedItems($event)">
        Clear selected items
      </button>
    </div>
    <filter-item
      *ngFor="let item of selectedItemsCache; let i = index;"
      [selected]="isSelected(item)"
      [itemTemplate]="itemTemplate"
      (selectedChange)="onSelect($event)"
      [item]="item">
    </filter-item>
    <div class="autocomplete-section-header" *ngIf="loadedItemsCache.length && selectedItemsCache.length">
      ALL VALUES
    </div>
    <div *ngIf="loadedItemsCache.length">
      <filter-item
        *ngFor="let item of loadedItemsCache; let i = index;"
        [itemTemplate]="itemTemplate"
        [selected]="isSelected(item)"
        (selectedChange)="onSelect($event)"
        [item]="item">
      </filter-item>
    </div>
  </div>
  <bd-spinner *ngIf="isLoading"></bd-spinner>
</div>
